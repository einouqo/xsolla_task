# Backend летняя школа - итоговая работа

[![Build Status](https://travis-ci.org/joemccann/dillinger.svg?branch=master)](https://travis-ci.org/joemccann/dillinger)

# Задача
Требуется создать многопользовательское приложение для управления складскими запасами. Приложение нужно реализовать как backend сервис работающий по протоколу HTTP и использующий стандарт RESTful API . ([Полная постановка задачи][link_t])


# Особенности

  - Реализация с использованием микрофреймворка Slim
  - JWT для работы с COOKIE
  - Хранение истории продаж и перемещения между складами
  - Разделены сущности помещения (Room) и склада (Warehouse) для возможности внедрения другого типа помещения в будущем и дальнейшего удобства сопровождения продукта
  - Перемещения фиксируются только после принятия перемещения другим пользователем, на склад которого поступают товары
  - При создании компании генерируется ключ доступа к возможности удаления компании
  - Два типа пользователя: «Admin» и «Employee» (уникальные возможности описаны ниже)
  
----
##### Admin:
- Добавить/удалить помещение (в случае удаления также удаляются все связанные данные)
- Создать/удалить склад (преобразовать помещение в склад и сделать из склада простое помещение)
- Дать/забрать доступ к складу для Employee-ра
- Получить список перемещений для конкретного склада
- Изменить данные существующего склада
- Добавить товар на склад
- Изменить данные о товаре
- Получить отчет о состоянии товара по всем складам в количестве и общей стоимости (с возможностью получить информацию на конкретную дату)
- Получить отчет о перемещении товара по складам
    
##### Employee:
- Получить список доступных товаров
- Получить список товаров, находящихся в ожидании (поставки, которые необходимо принять)
- Совершить продажу
- Принять/создать/отправить поставку
- Получить список сформированной поставки (до ее отправления)

##### Общие:
-Получить список складов (для «Admin» выводится список всех складов компании, для «Employee» список складов к которым он имеет доступ)
- Получить полную информацию по складу с учетом товаров, хранящимся на нем (с возможностью получить информацию на конкретную дату)

##### Возможности, независящие от роли пользователя:
-Получить список существующих компаний
-Зарегистрировать/удалить компанию (удаление возможно только при указании ключа, который пользователь получает при регистрации компании, а также при удалении удаляются все связанные данные)
-Зарегистрироваться как пользователь с указанием дальнейшей роли в компании («Admin» или «Employee»)
-Изменить/удалить данные о пользователе (доступно только после аутентификации и в случае удаления удаляются и все связанные с учетной записью данные)

----

## Модель базы данных:
>![alt text](https://cdn1.savepice.ru/uploads/2018/10/1/969477f0bd5e35fb621c4dac7f94b8d7-full.png)

Tools, Frameworks and Package 
----
- [Slim][link_slim]
- [JWT][link_jwt]
- [Firebase library][link_firebase_jwt]
- [Composer][link_composer]
- [Symfony][link_symfony]
- [doctrine/dbal][link_doctrine]
- [PHPUnit][link_phpunit]

Лицензия
----
Xsolla :)

*А вообще, Open Source. Hell Yeah!*

   [link_t]: <https://docs.google.com/document/d/1xNw8AemftD7PvV1hPtp0LJxTPYjQT83cENroMT_chkk/edit>
   [link_slim]: <https://www.slimframework.com>
   [link_jwt]: <https://jwt.io>
   [link_firebase_jwt]: <https://github.com/firebase/php-jwt>
   [link_composer]: <https://getcomposer.org>
   [link_symfony]: <https://symfony.com>
   [link_doctrine]: <https://github.com/doctrine/dbal>
   [link_phpunit]: <https://phpunit.de>
